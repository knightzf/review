I also thought it was a dp problem however I failed to deduce the correct transition formula.

The idea is based on keeping track of min and max, for each new number, check it's sign and decide whether it multiplies with min and max will produce the new min and max.

This is a great question that looks simple but actually hard.

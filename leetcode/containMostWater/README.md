I should have been able to find the solution my self.

Easiest way is to calculate area for all i,j which is NxN complexity.

The solution starts from two sides and converge to the middle. Narrower ranges need to be higher to produce larger area. That's the key idea.

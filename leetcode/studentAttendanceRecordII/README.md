I am glad I figured out this problem by myself.

1. It feels like a difficult problem.\
2. DP is likely the way to solve it.\
3. Initially I thought of only consider P and L which isn't too hard to find the recursive relationship.\
4. Then I thought I can just add A to the P,L only results.\
5. Which is proven to be wrong because there can be duplicates.\
6. I thought for a while and went to have dinner.\
7. On the way back I thought I can use A as a delimiter and the remaining two parts are P,L only cases.\
8. This is the right solution however I got the P,L relationship wrong and took a while to get it right.\
9. Looked at discussion, there are ways to find resurively relationship of A as well.\
10. Which is pretty good and I learned something there too.

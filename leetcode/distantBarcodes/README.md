I managed to make it work but very ugly.\
The main point was how to arrange the numbers, tried to start begin and end.\
Also tried to use a merge sort like way to pop number for each group.\
Both ways need to handle the case where there are some remaining elements that doesn't fit.\
Need to manually scan the result array to insert.

Checked at discussion, it turns out to be quite simple.\
Just need to start from most frequence number to fill all odd positions.\
Then fill all even positions.\
Very smart and very frustrating for me.
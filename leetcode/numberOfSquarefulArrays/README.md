Basically backtracking dfs.\
Solution in discussion is better than mine.
https://leetcode.com/contest/weekly-contest-124/problems/number-of-squareful-arrays/